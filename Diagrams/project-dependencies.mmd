graph TB
    subgraph "Presentation Layer"
        Client[PoRepoLineTracker.Client<br/>Blazor WebAssembly]
        Api[PoRepoLineTracker.Api<br/>ASP.NET Core API]
    end

    subgraph "Application Layer"
        App[PoRepoLineTracker.Application<br/>Business Logic & MediatR]
    end

    subgraph "Domain Layer"
        Domain[PoRepoLineTracker.Domain<br/>Core Entities]
    end

    subgraph "Infrastructure Layer"
        Infra[PoRepoLineTracker.Infrastructure<br/>Data Access & External Services]
    end

    subgraph "External Dependencies"
        AzureTable[(Azure Table Storage<br/>Repositories, Commits, Failed Ops)]
        GitHub[GitHub API<br/>Repository Cloning]
        AppInsights[Application Insights<br/>Telemetry & Logging]
    end

    subgraph "Test Projects"
        UnitTests[PoRepoLineTracker.UnitTests]
        IntegrationTests[PoRepoLineTracker.IntegrationTests]
        ApiTests[PoRepoLineTracker.ApiTests]
        SystemTests[PoRepoLineTracker.SystemTests]
    end

    %% Project Dependencies
    Api --> Client
    Api --> App
    Api --> Infra
    App --> Domain
    Infra --> Domain
    Infra --> App

    %% External Dependencies
    Api --> AppInsights
    Infra --> AzureTable
    Infra --> GitHub

    %% Test Dependencies
    UnitTests -.-> App
    UnitTests -.-> Domain
    IntegrationTests -.-> Infra
    IntegrationTests -.-> AzureTable
    ApiTests -.-> Api
    SystemTests -.-> Api
    SystemTests -.-> Client

    %% Styling
    classDef presentation fill:#6750A4,stroke:#21005D,stroke-width:2px,color:#fff
    classDef application fill:#7D5260,stroke:#3E2723,stroke-width:2px,color:#fff
    classDef domain fill:#006C4C,stroke:#00382A,stroke-width:2px,color:#fff
    classDef infrastructure fill:#00687A,stroke:#003544,stroke-width:2px,color:#fff
    classDef external fill:#D4A373,stroke:#8B6F47,stroke-width:2px,color:#000
    classDef tests fill:#B3B3B3,stroke:#666666,stroke-width:1px,color:#000,stroke-dasharray: 5 5

    class Client,Api presentation
    class App application
    class Domain domain
    class Infra infrastructure
    class AzureTable,GitHub,AppInsights external
    class UnitTests,IntegrationTests,ApiTests,SystemTests tests
